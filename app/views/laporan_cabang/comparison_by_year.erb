<%= form_tag laporan_cabang_comparison_by_year_path, :method => 'get' do %>

  <p>
    <%= label_tag 'Periode' %>
    <%= text_field_tag 'periode' %>
  </p>
  <br />
  <p>
    <%= label_tag 'Minggu ke' %>
    <%= text_field_tag 'week' %>
  </p>
  <br />
  <p>
    Periode Range<br /><br />
    <%= label_tag 'From' %>
    <%= text_field_tag 'from'  %>
    <%= label_tag 'To' %>
    <%= text_field_tag 'to' %>
  </p>
  <br /><br />
  <p>
    <%= submit_tag "Submit" %>
  </p>
<% end %>
<br />

<% unless params[:periode].nil? %>

  <table id="table_year" class="pretty">
    <thead>
      <tr>
        <th rowspan="4">Branches</th>
        <th colspan="14">Comparison</th>
      </tr>
      <tr>
        <th colspan="3">Last Week</th>
        <th colspan="3">This Week</th>
        <th colspan="3">Total bulan berjalan <br /> s/d <%= @periode.to_date.strftime('%d %B')  %></th>
        <th colspan="3">Akumulasi Total</th>
      </tr>
      <tr>
        <% (1..2).each do |loop| %>
          <th><%= 1.year.ago(@periode.to_date).year %></th>
          <th><%= @periode.to_date.year %></th>
          <th rowspan="2">%</th>
        <% end %>
        <th rowspan="2"><%= 1.year.ago(@periode.to_date).year %></th>
        <th rowspan="2"><%= @periode.to_date.year %></th>
        <th rowspan="2">%</th>
        <th rowspan="2">Jan s/d <br /> <%= 1.year.ago(@periode.to_date).strftime('%d %b %Y') %></th>
        <th rowspan="2">Jan s/d <br /> <%= @periode.to_date.strftime('%d %b %Y') %></th>
        <th rowspan="2">%</th>
      </tr>
      <tr>
        <th><%= 1.year.ago(1.weeks.ago(@periode.to_date - 6.days)).to_date.strftime('%d') %>-<%= 1.year.ago(1.weeks.ago(@periode.to_date)).to_date.strftime('%d %b') %></th>
        <th><%= 1.weeks.ago(@periode.to_date - 6.days).to_date.strftime('%d') %>-<%= 1.weeks.ago(@periode.to_date).to_date.strftime('%d %b') %></th>
        <th><%= 1.year.ago(@periode.to_date - 6.days).to_date.strftime('%d') %> - <%= 1.year.ago(@periode.to_date).strftime('%d %b')  %></th>
        <th><%= (@periode.to_date - 6.days).to_date.strftime('%d') %> - <%= @periode.to_date.strftime('%d %b')  %></th>
      </tr>
    </thead>
    <tfoot>
      <tr>
        <th scope="row">Total</th>
        <td>212.920</td>
        <td>214.860</td>
        <td>206.390</td>
        <td>207.535</td>
        <td>2.7</td>
        <td>0.1</td>
        <td>2.7</td>
        <td>0.1</td>
        <td>2.7</td>
        <td>0.1</td>
        <td>2.7</td>
        <td>0.1</td>
      </tr>
    </tfoot>
    <tbody>
      <% @cabang_get_id.each do |cabang| %>
        <tr>
          <th scope="row"><%= cabang.Cabang %></th>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
      <% end %>
    </tbody>
  </table>

<% end %>

<script type="text/javascript" charset="utf-8">
  $(document).ready(function() {
    $('#table_year').dataTable( {
      sPaginationType: "full_numbers",
      bJQueryUI: true
    } );
  } );
</script>