<div class="offset1" padding-top="30px">
	<div id="orders_chart" style="width: 900px; height: 500px;"></div>
</div>
<script type="text/javascript" charset="utf-8">
  $(function () {
    new Highcharts.Chart({
		  chart: { renderTo: 'orders_chart' },
		  title: { text: 'Sales by Day' },
		  xAxis: { type: 'datetime' },
		  yAxis: {
		    title: { text: 'Total' }
		  },
		  tooltip: {
		    formatter: function () {
		      return Highcharts.dateFormat("%B %e %Y", this.x) + ': ' +
		        Highcharts.numberFormat(this.y);
		    }
		  },
		  series: [
			<% Merk.all.each do |merk| %>
			{
				name: "<%= merk.Merk %>",
		    pointInterval: <%= 1.day * 1000 %>,
		    pointStart: <%= Date.today.beginning_of_month.to_date.at_midnight.to_i * 1000 %>,
		    data: <%= (Date.today.beginning_of_month.to_date..Date.today).map { |date| 
					LaporanCabang.total_on(date, merk.Merk).to_f}.inspect %>
		  },
			<% end %>]
		});
  });
</script>
