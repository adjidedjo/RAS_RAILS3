<meta http-equiv="refresh" content="3600" />
<div class="row-fluid">
  <div class="offset3">
    <div class="span5">
      <table id="table_grand_total" class="display">
        <thead>
          <tr>
            <th style="font-size: 15px;"></th>
            <th style="font-size: 15px;"></th>
          </tr>
        </thead>
        <tfoot>
        </tfoot>
        <tbody>
          <% ["KM","DV","HB"].each do |jenis| %>
            <tr>
              <th scope="row" style="font-size: 18px;"><%= jenis(jenis) %></th>
              <td style="font-size: 20px;"><%= currency(LaporanCabang.sum_amount.search_by_type(jenis).search_by_month_and_year(Date.today.month, Date.today.year).not_equal_with_nosj.first.sum_harganetto2) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="offset4">
    <div class="span5">
      <table id="table_grand_total2" class="display">
        <thead>
          <tr>
            <th style="font-size: 15px;"></th>
            <th style="font-size: 15px;"></th>
          </tr>
        </thead>
        <tfoot>
        </tfoot>
        <tbody>
          <% ["KB","SA","SB"].each do |jenis| %>
            <tr>
              <th scope="row" style="font-size: 18px;"><%= jenis(jenis) %></th>
              <td style="font-size: 20px;"><%= currency(LaporanCabang.sum_amount.search_by_type(jenis).search_by_month_and_year(Date.today.month, Date.today.year).not_equal_with_nosj.first.sum_harganetto2) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
<div class="row-fluid">
  <div class="offset4">
    <div id="grand_total">
      <div class="span3">
        <h3 style="font-size: 25px;"><i>Grand Total</i></h3>
      </div>
      <div class="span3">
        <h3 style="font-size: 25px;"><%= currency(@grand_total) %></h3>
      </div>
    </div>
  </div>
</div>
<div class="row-fluid">
  <div class="block-content collapse in">
    <label>
    </label>
  </div>
</div>
<br />
<div class="row-fluid">
  <div class="block-content collapse in">
    <table id="table_total" class="display">
      <thead>
        <tr>
          <th rowspan="2" style="font-size: 15px;">Type</th>
          <th colspan="8" style="font-size: 15px;">Branches</th>
        </tr>
        <tr>
          <% Cabang.get_id_to_7.each do |cabang| %>
            <th style="font-size: 15px;"><%= cabang.Cabang.gsub(/Cabang/,'') %></th>
          <% end %>
        </tr>
      </thead>
      <tfoot>
      </tfoot>
      <tbody>
        <% ["KM","DV","HB","KB","SA","SB"].each do |jenis| %>
          <tr>
            <th scope="row" style="font-size: 15px;"><%= jenis %></th>
            <% @cabang_7.each do |cab| %>
              <td style="font-size: 15px;"><%= currency(cab.laporan_cabang.sum_amount.search_by_type(jenis).search_by_month_and_year(Date.today.month, Date.today.year).not_equal_with_nosj.first.sum_harganetto2) %></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
    <table id="table_total2" class="display" style="display: none">
      <thead>
        <tr>
          <th rowspan="2" style="font-size: 15px;">Type</th>
          <th colspan="7" style="font-size: 15px;">Branches</th>
        </tr>
        <tr>
          <% Cabang.get_id_to_22.each do |cabang| %>
            <th style="font-size: 15px;"><%= cabang.Cabang.gsub(/Cabang/,'') %></th>
          <% end %>
        </tr>
      </thead>
      <tfoot>
      </tfoot>
      <tbody>
        <% ["KM","DV","HB","KB","SA","SB"].each do |jenis| %>
          <tr>
            <th scope="row" style="font-size: 15px;"><%= jenis %></th>
            <% @cabang_24.each do |cab| %>
              <td style="font-size: 15px;"><%= currency(cab.laporan_cabang.sum_amount.search_by_type(jenis).search_by_month_and_year(Date.today.month, Date.today.year).not_equal_with_nosj.first.sum_harganetto2) %></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<script type="text/javascript">
  $(function(){
    var timer = setInterval(showTable, 60000);
    var counter = 0;
    function showTable(){
      if(counter == 0){
        $("#table_total").hide(700);
        $("#table_total2").show(700);
      }
      else{
        $("#table_total2").hide(700);
        $("#table_total").show(700);
      }
      counter == 1? counter = 0 : counter++
    }
  });
</script>